.darkmode-toggle ğŸŒ“

script.
  // åŸå§‹ä»£ç ï¼šè¯»å–ç³»ç»Ÿæ·±è‰²æ¨¡å¼åå¥½
  // var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');

  // æœ€å°åŒ–ä¿®æ”¹ï¼šä¸è¯»å–ç³»ç»Ÿåå¥½ï¼Œå¼ºåˆ¶é»˜è®¤æ·±è‰²æ¨¡å¼
  // é€ ä¸€ä¸ªå‡çš„å¯¹è±¡ï¼Œè®© prefersDarkMode.matches æ°¸è¿œä¸º true
  var prefersDarkMode = { matches: true };

  // è·å–åˆ‡æ¢æŒ‰é’®
  var toggle = document.querySelector('.darkmode-toggle');

  // è·å– <html> å…ƒç´ ï¼Œç”¨äºè®¾ç½® data-dark å±æ€§
  var html = document.querySelector('html');

  // åˆå§‹åŒ–æš—è‰²æ¨¡å¼ï¼š
  // ä¼˜å…ˆä½¿ç”¨ localStorage.darkï¼ˆç”¨æˆ·ä¸Šæ¬¡é€‰æ‹©ï¼‰
  // å¦‚æœæ²¡æœ‰è®°å½•ï¼Œåˆ™ä½¿ç”¨ prefersDarkMode.matchesï¼ˆç°åœ¨æ°¸è¿œä¸º trueï¼‰
  html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

  // ç‚¹å‡»æŒ‰é’®æ—¶åˆ‡æ¢æš—è‰²æ¨¡å¼
  toggle.addEventListener('click', () => {
    // å½“å‰çŠ¶æ€å–åï¼Œå¹¶å†™å…¥ localStorage
    localStorage.dark = !(html.dataset.dark == 'true');

    // åŒæ­¥åˆ° <html> çš„ data-dark å±æ€§
    html.dataset.dark = localStorage.dark;
  });